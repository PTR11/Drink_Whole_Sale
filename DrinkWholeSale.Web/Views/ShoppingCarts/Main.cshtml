@model IEnumerable<DrinkWholeSale.Persistence.ShoppingCart>
@using DrinkWholeSale.Persistence;
@using Microsoft.AspNetCore.Http;


<!--<h3>Cart Page</h3>
<p> <a asp-action="DeleteAll">Delete All</a> </p>
@if (Context.Session.GetString("CartSessionKey") != null)
{
    <table cellpadding="2" cellspacing="2" border="1">
        <tr>
            <th>Name</th>
            <th>Pack</th>
            <th>Quantity</th>
            <th>Net price</th>
            <th>Gross price</th>
        </tr>
        @foreach (var item in Model)
        {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.Name)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Pack)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Quantity)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.TotalPrice)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.TotalGrossPrice)
        </td>
        <td>
            <a asp-action="Delete" asp-route-id="">Delete</a>
        </td>
    </tr>
        }
    </table>
}
else
{
    <p>No item</p>
}

<br>
<p>Total net price: @ViewBag.TotalNetPrice</p>
<p>Total gross price: @ViewBag.TotalGrossPrice</p>
<p><a asp-action="Index"  asp-route-id="0">Pay </a></p>-->
@*itt át kellene adni a user idt nem?*@
<!--<a href="@Url.Action("Index", "MainCats")">Continue Shopping</a>-->


<link rel="stylesheet" href="~/css/cart.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js" />
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.bundle.min.js" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" />

<a asp-action="DeleteAll">Delete All</a>
<div class="card">
    <div class="row">
        <div class="col-md-8 cart">
            <div class="title">
                <div class="row">
                    <div class="col">
                        <h4><b>Shopping Cart</b></h4>
                    </div>
                </div>
            </div>
            @if (Context.Session.GetString("CartSessionKey") != null)
            {
                @foreach (var item in Model)
                {
                    <div class="row border-top border-bottom">
                        <div class="row main align-items-center">
                            @*<div class="col-2"><img class="img-fluid" src="https://i.imgur.com/pHQ3xT3.jpg"></div>*@
                            <div class="col">
                                <div class="row text-muted">Ital</div>
                                <div class="row"> @Html.DisplayFor(modelItem => item.Name)</div>
                            </div>
                            <div class="col"> @Html.DisplayFor(modelItem => item.Quantity)</div>
                            <div class="col">@Html.DisplayFor(modelItem => item.Pack) </div>
                            <div class="col">
                                &euro;  @Html.DisplayFor(modelItem => item.TotalGrossPrice)
                                &euro;  @Html.DisplayFor(modelItem => item.TotalPrice)
                                <a asp-action="Delete" asp-route-ProductId="@item.ProductId">  <span class="close">&#10005;</span></a>
                            </div>
                           
                        </div>
                    </div>
                }
            }
            else
            {
                <p>Cart Empty</p>
            }

            <div class="back-to-shop"><a href="#">&leftarrow;</a><span class="text-muted">Back to shop</span></div>
        </div>
        <div class="col-md-4 summary">
            <div>
                <h5><b>Summary</b></h5>
            </div>
            <hr>
            <div class="row">
                <div class="col" style="padding-left:0;">
                    Items:
                    @if (Context.Session.GetString("CartSessionKey") != null)
                    {
                        @ViewBag.CountItems
                    }


                </div>
            </div>
            <div class="row" style="border-top: 1px solid rgba(0,0,0,.1); padding: 2vh 0;">
                <div class="col">TOTAL PRICE</div>
                <div class="col text-right">&euro; @ViewBag.TotalGrossPrice</div>
                <div class="col text-right">&euro; @ViewBag.TotalNetPrice</div>
            </div> <a asp-action="Index" asp-route-id="0" class="btn">CHECKOUT </a>
        </div>
    </div>
</div>
